<p>Tank Information</p>
<!-- 
    ngModel on inputs, change row to tank, 
    show who's (single person, 3 letter username) assigned to the tank, 
    drop-down with species and number of that species, 
    user can't change project ID/tank ID/user assigned (make it a label, not a input if it's a user), 
    display project name not ID,
    change room the tank is in,
    trial codes on initial page (ask Ron if he cares)
    NTH: SnackBar 
  -->

<form [formGroup]="tankForm">
  <div fxLayout="column">
    <mat-form-field>
      <input matInput type="number" placeholder="Tank Number" formControlName="tankId" required />
    </mat-form-field>

    <mat-form-field>
      <mat-select matInput placeholder="Room Number" formControlName="roomId" required>
        <mat-option *ngFor="let room of roomService.loadRooms() | async" [value]="room.roomId">
          {{room.building}} {{room.roomNumber}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select matInput placeholder="Tank Status" name="status" formControlName="status" required>
        <mat-option *ngFor='let status of statusList' [value]='status.value'>
          {{ status.value }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select matInput placeholder="User ID" formControlName="maintainer_participantCode">
        <mat-option *ngFor="let participant of participantService.loadParticipants() | async" [value]="participant.participantCode">
          {{participant.name}} - {{participant.participantCode}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <input matInput type="text" placeholder="Project Name" formControlName="projNames" />
    </mat-form-field>


    <mat-form-field>
      <input matInput type="text" placeholder="Trial Code" formControlName="trialCode" />
    </mat-form-field>


    <!--a table with list of species with this tank-->
    <mat-table class="table-margin-bottom" #table [dataSource]="dataSource">
      <ng-container matColumnDef="currentName">
        <mat-header-cell *matHeaderCellDef> Current Name </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <mat-form-field floatLabel="{{ row.editing ? 'float' : 'never'}}">
            <input matInput [readonly]="!row.editing" placeholder="Current Name" [(ngModel)]="row.currentData.currentName"
              required [disabled]="!row.editing">
          </mat-form-field>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="actionsColumn">
        <mat-cell *matCellDef="let row">
          <button *ngIf="!row.editing" mat-icon-button color="primary" focusable="false" (click)="row.startEdit()">
            <i class="fa fa-pencil mat-icon"></i>
          </button>
          <button *ngIf="row.editing" mat-icon-button color="primary" focusable="false" (click)="confirmSave(row)">
            <i class="fa fa-check mat-icon"></i>
          </button>
          <button mat-icon-button color="primary" focusable="false" (click)="cancelOrDelete(row)">
            <i class="fa fa-times mat-icon"></i>
          </button>
        </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>

    <mat-form-field>
      <mat-select placeholder="Species Names">
        <mat-option *ngFor="let species of speciesList">
          {{ species.currentName }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-raised-button> Click me </button>


  </div>
</form>

<p>
  <button mat-raised-button *ngIf="!tankId" (click)="confirmAdd(tankForm)">Add</button>
  <button mat-raised-button *ngIf="tankId" (click)="confirmSave(tankForm)">Save</button>
  <button mat-raised-button *ngIf="tankId" (click)="confirmDelete(tankForm)">Delete</button>
</p>